<div class="sheet-area flex-columns pc-power-shapes">
    <div>
        <div class="sheet-headline sheet-banner splatFont">
            <span class="sheet-banner-text">{{localize "wod.tab.shapechange"}}</span>
        </div>
        <div class="shape-details-container">
            {{#each shapes as |shapeform index|}}
                <div class="shape-panel {{#if shapeform.system.isactive}}shape-panel-active{{/if}}"
                     data-form="{{shapeform._id}}" data-itemid="{{shapeform._id}}" data-type="isactive" data-action="formActive">
                    <div class="shape-panel-image">
                        {{#if (actor.ShowTokenImage ../actor shapeform._id 'tokenimage')}}
                            <img class="shape-image" src="{{shapeform.system.tokenimage}}" />
                        {{else if (actor.ShowTokenImage ../actor shapeform._id 'icon')}}
                            <img class="shape-image" src="{{shapeform.system.icon}}" />
                        {{/if}}
                    </div>
                    <div class="shape-panel-header">
                        <div class="shape-panel-title shape-selector {{#if shapeform.system.isactive}}shape-selector-active{{/if}}">
                            {{localize shapeform.system.label}}
                        </div>
                        <div class="shape-panel-header-actions">
                            {{#if (eq ../locked false)}}
                                <a class="pointer item-edit" title="{{localize 'wod.labels.edit.headline'}}" data-type="Trait" data-itemid="{{shapeform._id}}" data-action="itemEdit"><i class="icon fa-solid fa-pen-to-square"></i></a>
                            {{/if}}
                            <i class="pointer icon collapsible button power fa-solid fa-expand"
                               title="{{localize 'wod.labels.show.description'}}"
                               data-itemid="shape-{{shapeform._id}}"></i>                            
                        </div>
                    </div>
                    <div class="description shape-panel-body"
                         data-itemid="shape-{{shapeform._id}}">
                        <div class="shape-bonus-list">
                            {{#if (isEmpty (getShapeformAttributeBonuses shapeform))}}
                                {{localize "wod.labels.nochange"}}
                            {{else}}
                                {{#each (getShapeformAttributeBonuses shapeform) as |bonus|}}
                                    {{#if (eq bonus.type "attribute_fixed_value")}}
                                        {{localize (getAttributeShortKey bonus.settingtype)}} {{formatBonusValue bonus}}<br />
                                    {{else if (eq bonus.type "attribute_buff")}}
                                        {{localize (getAttributeShortKey bonus.settingtype)}} ({{formatBonusValue bonus}})<br />
                                    {{else if (eq bonus.type "attribute_diff")}}
                                        {{localize (getAttributeShortKey bonus.settingtype)}} {{lowercase (localize "wod.labels.difficulty")}} {{formatBonusValue bonus}}<br />
                                    {{/if}}
                                {{/each}}
                            {{/if}}
                        </div>
                        <div class="shape-difficulty">
                            {{localize "wod.power.diff"}}: {{shapeform.system.difficulty}}
                        </div>
                    </div>
                </div>
            {{/each}}
        </div>
    </div>
</div>